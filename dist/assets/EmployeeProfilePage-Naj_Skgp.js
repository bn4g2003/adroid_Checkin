import{u as O,r as o,j as e}from"./index-V-x1CcZ_.js";import{c as x,u as A,g as R,U as S}from"./useToast-C0bm4l8s.js";import{C as q,B as W}from"./BottomNav-BtuPnx2H.js";import{X,A as _,M as G,D as J}from"./x-DPaissle.js";import{C as D}from"./calendar-BoSvrQ7h.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Q=x("briefcase",K);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Z=x("building",Y);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],se=x("mail",ee);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ae=x("phone",te);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ne=x("save",re);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ie=x("square-pen",le);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],de=x("trending-up",oe);function ge(){const z=O(),{addToast:h}=A(),[t,M]=o.useState(null),[C,U]=o.useState([]),[E,I]=o.useState({}),[V,T]=o.useState(!0),[u,v]=o.useState(!1),[l,p]=o.useState({});o.useEffect(()=>{const s=localStorage.getItem("employeeSessionId");if(!s){h({type:"error",message:"Please login first"}),z("/employee-login");return}$(s)},[z,h]);const $=async s=>{try{const{database:a,ref:i,get:g,onValue:y}=await R(),w=i(a,`employees/${s}`),f=await g(w);f.exists()&&M({id:s,...f.val()});const j=i(a,"checkins");y(j,d=>{const m=d.val();if(m){const k=Object.entries(m).map(([r,c])=>({id:r,...c})).filter(r=>r.employeeId===s).sort((r,c)=>new Date(c.timestamp)-new Date(r.timestamp));U(k)}});const N=i(a,"workRecords");y(N,d=>{const m=d.val()||{};I(m)}),T(!1)}catch(a){console.error("Error loading data:",a),h({type:"error",message:"Error loading data"}),T(!1)}},n=o.useMemo(()=>{if(!t)return null;const s=[];Object.values(E).forEach(r=>{r[t.id]&&s.push(r[t.id])});const a=s.length,i=s.reduce((r,c)=>r+(c.totalHours||0),0),g=a>0?i/a:0,y=s.filter(r=>!r.late).length,w=a>0?y/a*100:0,f=s.reduce((r,c)=>r+Math.max(0,(c.totalHours||0)-8),0),j=t.baseSalary||0,N=t.baseSalaryUSD||0,d=t.salaryPercentage||100,m=j*(d/100),k=N*(d/100);return{totalDays:a,totalHours:i,avgHoursPerDay:g,onTimeRate:w,totalOvertime:f,baseSalary:j,baseSalaryUSD:N,salaryPercentage:d,actualSalary:m,actualSalaryUSD:k}},[t,E]),H=()=>{p({phone:t.phone||"",email:t.email||"",birthday:t.birthday||""}),v(!0)},F=()=>{v(!1),p({})},L=async()=>{try{const{database:s,ref:a,update:i}=await R(),g=a(s,`employees/${t.id}`);await i(g,{phone:l.phone||null,email:l.email||null,birthday:l.birthday||null}),M({...t,...l}),v(!1),h({type:"success",message:"Cập nhật thông tin thành công!"})}catch(s){console.error("Error updating:",s),h({type:"error",message:"Lỗi khi cập nhật thông tin"})}},b=(s,a="VND")=>a==="VND"?new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(s):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),P=s=>s?new Date(s).toLocaleDateString("vi-VN"):"-",B=s=>s?new Date(s).toLocaleString("vi-VN"):"-";return V?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 pb-24 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-3xl shadow-2xl overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-purple-50/50 pointer-events-none"}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(S,{size:40,className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:t.fullName}),e.jsxs("p",{className:"text-gray-600",children:["ID: ",t.id]}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-semibold mt-2 ${t.active!==!1?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.active!==!1?"Active":"Inactive"})]})]}),u?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition",children:[e.jsx(ne,{size:18}),"Save"]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition",children:[e.jsx(X,{size:18}),"Cancel"]})]}):e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition",children:[e.jsx(ie,{size:18}),"Edit"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-3xl shadow-xl overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 to-transparent pointer-events-none"}),e.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(Q,{size:20,className:"text-indigo-600"}),"Work Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Department:"}),e.jsx("span",{className:"font-medium",children:t.department||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Position:"}),e.jsx("span",{className:"font-medium",children:t.position||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Branch:"}),e.jsx("span",{className:"font-medium",children:t.branch||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:"Team:"}),e.jsx("span",{className:"font-medium",children:t.team||"-"})]})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-3xl shadow-xl overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/30 to-transparent pointer-events-none"}),e.jsxs("h2",{className:"relative text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(S,{size:20,className:"text-indigo-600"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600 min-w-[120px]",children:"Date of Birth:"}),u?e.jsx("input",{type:"date",value:l.birthday||"",onChange:s=>p({...l,birthday:s.target.value}),className:"px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500"}):e.jsx("span",{className:"font-medium",children:P(t.birthday)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600 min-w-[120px]",children:"Email:"}),u?e.jsx("input",{type:"email",value:l.email||"",onChange:s=>p({...l,email:s.target.value}),className:"flex-1 px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500",placeholder:"email@example.com"}):e.jsx("span",{className:"font-medium",children:t.email||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600 min-w-[120px]",children:"Phone:"}),u?e.jsx("input",{type:"tel",value:l.phone||"",onChange:s=>p({...l,phone:s.target.value}),className:"flex-1 px-3 py-1 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500",placeholder:"0123456789"}):e.jsx("span",{className:"font-medium",children:t.phone||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-gray-600 min-w-[120px]",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:P(t.startDate)})]})]})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-gradient-to-r from-green-400/90 to-emerald-500/90 border border-white/40 rounded-3xl shadow-2xl overflow-hidden p-6 text-white",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent pointer-events-none"}),e.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(J,{size:24}),"Salary Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Base Salary"}),e.jsx("p",{className:"text-2xl font-bold",children:n.baseSalary>0?b(n.baseSalary,"VND"):b(n.baseSalaryUSD,"USD")})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Salary Percentage"}),e.jsxs("p",{className:"text-2xl font-bold",children:[n.salaryPercentage,"%"]})]}),e.jsxs("div",{className:"bg-white/20 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm opacity-90",children:"Actual Salary"}),e.jsx("p",{className:"text-2xl font-bold",children:n.actualSalary>0?b(n.actualSalary,"VND"):b(n.actualSalaryUSD,"USD")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-2xl shadow-xl overflow-hidden p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50/50 to-transparent pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"}),e.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:n.totalDays})]}),e.jsx(D,{size:40,className:"text-indigo-200"})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-2xl shadow-xl overflow-hidden p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-transparent pointer-events-none"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Hours"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[n.totalHours.toFixed(1),"h"]})]}),e.jsx(q,{size:40,className:"text-blue-200"})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-2xl shadow-xl overflow-hidden p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-50/50 to-transparent pointer-events-none"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On-Time Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[n.onTimeRate.toFixed(1),"%"]})]}),e.jsx(de,{size:40,className:"text-green-200"})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-2xl shadow-xl overflow-hidden p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-50/50 to-transparent pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total OT"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[n.totalOvertime.toFixed(1),"h"]})]}),e.jsx(_,{size:40,className:"text-orange-200"})]})]})]}),e.jsxs("div",{className:"relative backdrop-blur-xl bg-white/90 border border-white/40 rounded-3xl shadow-xl overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50/30 to-transparent pointer-events-none"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Recent Check-in History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"WiFi"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[C.slice(0,10).map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm",children:B(s.timestamp)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.type==="in"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:s.type==="in"?"Check In":"Check Out"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:s.location?.address||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.wifi?.verified?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.wifi?.ssid||"Unknown"})})]},s.id)),C.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-4 py-8 text-center text-gray-500",children:"No check-in history yet"})})]})]})})]})]})}),e.jsx(W,{})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600",children:"Employee not found"})})})}export{ge as default};
